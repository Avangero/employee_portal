#!/bin/bash

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m' # No Color

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞..."

# –ó–∞–ø—É—Å–∫–∞–µ–º Duster –¥–ª—è PHP —Ñ–∞–π–ª–æ–≤
echo "–ó–∞–ø—É—Å–∫ Duster –¥–ª—è PHP —Ñ–∞–π–ª–æ–≤..."
./vendor/bin/duster fix
if [ $? -ne 0 ]; then
    echo -e "${RED}‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ Duster${NC}"
    exit 1
fi
echo -e "${GREEN}‚úÖ Duster —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–ª PHP —Ñ–∞–π–ª—ã${NC}"

# –ó–∞–ø—É—Å–∫–∞–µ–º Prettier –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
echo "–ó–∞–ø—É—Å–∫ Prettier –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞..."
npx prettier --write "**/*.{js,jsx,ts,tsx,css,scss,vue,html,json,md,yaml,yml}"
if [ $? -ne 0 ]; then
    echo -e "${RED}‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ Prettier${NC}"
    exit 1
fi
echo -e "${GREEN}‚úÖ Prettier —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–ª —Ñ–∞–π–ª—ã${NC}"

echo -e "${GREEN}‚ú® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!${NC}" 